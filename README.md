# AdvanceSynthesis_Using_DesignCompiler
# Introduction

* Synthesis is process of transferring higher level of abstraction (RTL) to implementable lower level of abstraction . It is the process of transforming RTL to gate-level netlist
* Synthesis process can be optimized for speed(timing)/Area/Testability(DFT)/Power
* Inputs : RTL,Technology Libraries,Constraints (Environment,clocks,IO Delays etc)
* Outputs : Netlist,SDC,Reports etc
* Synthesis is described as translation plus logic optimization plus mapping
* Translation is performed during Reading the files
* Logic optimization and mapping are performed by the compile command 

## Design Compiler(DC)
* From Synopsys are the tool widely used for synthesis
* Design Compiler® RTL synthesis solution enables users to meet today's design challenges with concurrent optimization of timing, area, power and test. Design Compiler includes innovative topographical technology that enables a predictable flow resulting in faster time to results. Topographical technology provides timing and area prediction within 10% of the results seen post-layout enabling designers to reduce costly iterations between synthesis and physical implementation. Design Compiler also includes a scalable infrastructure that delivers 2X faster runtime on quad-core platforms. 

#### Benefits
* Concurrent optimization of timing, area, power and test
* Results correlate within 10% of physical implementation
* Removes timing bottlenecks by creating fast critical paths
* Gate-to-gate optimization for smaller area on new or legacy designs while maintaining timing Quality of Results (QoR)
* Cross-probing between RTL, schematic, and timing reports for fast debug
* Offers more flexibility for users to control optimization on specific areas of designs
* Enables higher efficiency with integrated static timing analysis, test synthesis and power synthesis
* Support for multi voltage and multi supply
* 2X faster runtime on quad-core compute servers

#### Synopsys Design Constraints 
SDC is a short form of “Synopsys Design Constraint”. SDC is a common format for constraining the design which is supported by almost all Synthesis, PnR and other tools. Generally, timing, power and area constraints of design are provided through the SDC file and this file has extension .sdc. 

SDC file syntax is based on TCL format and all commands of sdc file follow the TCL syntax. In sdc file ‘#’ is used to comment a line and ” is used to break the line. SDC file can be generated by the synthesis tool and the same can be used in for PnR.

![sdc1](https://user-images.githubusercontent.com/88897605/179352819-176d4faa-e532-4e0d-8576-069a0d17961b.png)

### Goals of Synthesis 

* To get a Gate Level Netlist
* Inserting Clock Gates
* Logic Optimization
* Inserting DFT Logic
* Logic Equivalence between RTL and Netlist should be maintained

## Synthesis Flow

![synthesisflow](https://user-images.githubusercontent.com/88897605/179353055-109c2d99-b018-49a6-b64d-958eaa6563a2.jpeg)

## Inputs and Outputs of Synthesis
* Inputs : RTL,Technology Libraries,Constraints (Environment,clocks,IO Delays etc) and UPF
* Outputs : Netlist,SDC,Reports, UPF etc


![topographicalsynthesis](https://user-images.githubusercontent.com/88897605/179353108-3976ea7a-ebf3-411a-8c57-e345854ff04d.jpeg)

#### Design Compiler Environment Setup 

```
$ mkdir DC_WORKSHOP 
$ git clone https://github.com/kunalg123/sky130RTLDesignAndSynthesisWorkshop.git

```
#### Loading DC_Shell
![loading_dc_shell](https://user-images.githubusercontent.com/88897605/179353633-3303d5ab-7b54-4072-9169-52a0d22e1de7.png)

### Invoking Design Compiler

![invoke_dc_shell](https://user-images.githubusercontent.com/88897605/179353449-2dceb196-af95-44a0-8536-3ac0b7ffa0cd.png)

* Lab1_flop_with_en.v

![link_28nm](https://user-images.githubusercontent.com/88897605/179353584-9711e6f2-f70a-47c5-a908-2a4fd205fc4b.png)

#### Lab1 db_file optimization

![lab1 db_file optimization](https://user-images.githubusercontent.com/88897605/179353800-af864d80-a179-4159-8245-525f3133b020.png)

#### Mapping_optimisation

![mapping_optimisation](https://user-images.githubusercontent.com/88897605/179353798-05405570-8f8c-40e2-8acf-be88a3759946.png)


#### Delay Information

![delay_info](https://user-images.githubusercontent.com/88897605/179353804-824f5c66-56b4-4985-aa3e-7c75b1eb3c26.png)

#### Area Information

![area_info](https://user-images.githubusercontent.com/88897605/179353805-814d02f0-c170-4c78-90e3-6195447719c0.png)

 #### TCL Scipting 
 
![tcl_scripting](https://user-images.githubusercontent.com/88897605/179353795-2d42a3bc-2c57-4703-be89-580581929b55.png)


#### Invoking the Design Vision

![read_verilog lab1_net_with_28_32 v](https://user-images.githubusercontent.com/88897605/179354470-be97afe6-39fc-454b-a8d9-68ed7e4974a3.png)
![read_lab1_net_sch](https://user-images.githubusercontent.com/88897605/179354472-fe11d16f-cb21-425d-a5db-8b7a9bad03ef.png)

* After Linking the Design with Library files and compiling the design with compile_ultra
* 
![lab1_net_with_en_sch](https://user-images.githubusercontent.com/88897605/179354474-c73415f6-5696-4457-9c16-2aec105a56eb.png)
![lab1_net_with_28_32 v sch2](https://user-images.githubusercontent.com/88897605/179354475-5210b56d-f56b-4bae-8b45-f42245a94aba.png)

## Basics of Static Timing Analysis 

Static timing analysis (STA) is a method of validating the timing performance of a design by checking all possible paths for timing violations. STA breaks a design down into timing paths, calculates the signal propagation delay along each path, and checks for violations of timing constraints inside the design and at the input/output interface.


* Timing Dot Library Exploring Dot Library Files

![saed32hvt_tt0p85v25c lib1](https://user-images.githubusercontent.com/88897605/179354702-274650c8-cac4-48ec-a42c-df9a7a1f04ec.png)
![saed32hvt_tt0p85v25c lib](https://user-images.githubusercontent.com/88897605/179354705-1557c7f7-3c21-4788-ab0e-f05e620032a8.png)

* saed32hvt_tt0p85v25c.lib
![IMG-20220713-WA0003](https://user-images.githubusercontent.com/88897605/179354832-674c6bc6-060f-4fbf-ab61-83d81418c416.jpg)
![IMG-20220713-WA0002 (2)](https://user-images.githubusercontent.com/88897605/179354835-f33fcd12-7d44-4e5c-a700-0a81d74114f5.jpg)
![IMG-20220713-WA0001 (4)](https://user-images.githubusercontent.com/88897605/179354836-48e46332-d7d9-4711-b556-24f51cc1cf20.jpg)


## Advanced Constraints

#### Major Design Rule Constraints 

![majordrc](https://user-images.githubusercontent.com/88897605/179355116-e278f333-bf34-4678-9089-df97858bed39.jpeg)

#### Major Design Design Constraints 
![majordpc](https://user-images.githubusercontent.com/88897605/179355117-999aed95-5a8d-4123-b958-397c2ae73843.jpeg)

* Loading design get_cells, get_ports, get_nets

* get_cells
![get_cell](https://user-images.githubusercontent.com/88897605/179355237-90f8796b-a948-4ea2-886f-c190ad8fde01.png)

* get_ports
![get_port](https://user-images.githubusercontent.com/88897605/179355232-187997fa-5c3a-41bf-b354-a6973d5bb4ff.png)

* get_nets
![get_pins](https://user-images.githubusercontent.com/88897605/179355236-aec863f5-71f4-4dd8-acbc-b494f73a5a52.png)

* get_clocks
![clocks_pins](https://user-images.githubusercontent.com/88897605/179355341-d1607bd8-b408-4670-a563-4eaa334ad5ff.png)

##### Creating Clock Waveform

![my_clock 0 5](https://user-images.githubusercontent.com/88897605/179355414-4166273b-be67-41da-9baa-ea33a5feba29.png)

![my_clk 15 20](https://user-images.githubusercontent.com/88897605/179355416-f16f4433-cade-4da2-8848-5af6524aa4a2.png)

![0 5 clock](https://user-images.githubusercontent.com/88897605/179355417-7e4a6d5b-11f5-4525-a7b2-e15174b886b8.png)

![0 2 5 myclk](https://user-images.githubusercontent.com/88897605/179355419-5ac8281c-8b26-44e7-aaec-97cfaf4c4716.png)

#### Clock Network Modelling - Uncertainty, report_timing

Uncertainty: It specifies a window within which a clock edge can occur. In physical design uncertainty will be used to model several factors like jitter (the deviation of clock edge from its ideal position), additional margins and skew (at pre-cts)

There will be different uncertainty values specified for setup and hold
As hold check is performed with respect to same clock edge, any deviation in clock edge (jitter) will affect both launch and capture flop in same way. So for hold uncertainty no need to model jitter, this is the reason, why we always see less value for hold uncertainty compared to setup uncertainty.
Before CTS, uncertainty will also models the expected skew after implementation of clock tree (post-cts). So, at post-cts stages we will reduce the uncertainty values as actual skew values are available.
Setup Uncertainty:

Pre-Cts = Jitter + Skew + Extra setup margin

Cts = Jitter + Extra setup margin

Hold Uncertainty:

Pre-Cts = Skew + Extra hold margin

cts = Extra hold margin

* MYCLK_MIN
![MYCLK_MIN](https://user-images.githubusercontent.com/88897605/179355582-62ad4ae1-fe8d-414d-9746-8102ae7ad3c5.png)

* MYCLK_MET
![MYCLK(MET)](https://user-images.githubusercontent.com/88897605/179355584-ad646a9d-45ac-4e50-b5d3-a32af2e2e40f.png)

* MYCLK_MAX
![MYCLK_MAX](https://user-images.githubusercontent.com/88897605/179355587-bbb16842-108e-4ec3-bde3-7d0fd59c712b.png)


#### Report_Timing
* report_timing_IN_A
![report_timing_IN_A](https://user-images.githubusercontent.com/88897605/179355693-ba371a29-6b81-4d7e-8305-b7c89f368572.png)

* report_timing -OUT -Y
![report_timing -OUT -Y](https://user-images.githubusercontent.com/88897605/179355690-cfcd79a3-7d45-41c1-b485-8119f982cac7.png)

report_timing_REGC_reg/D
![report_timing_](https://user-images.githubusercontent.com/88897605/179355696-11085f03-4913-43fb-bdbc-2141b9c92dbe.png)

#### IO Delays
![read_ddc lab8_circuit ddc](https://user-images.githubusercontent.com/88897605/179355984-b3ca3ac5-46af-4b7b-a97d-16ecea9d2e66.png)

![lab8_circuit_full_sch](https://user-images.githubusercontent.com/88897605/179355986-626aba9d-0280-443b-829c-4a10b595bce9.png)


## Optimizations

* Optimizations 1
![opt_check2](https://user-images.githubusercontent.com/88897605/179356116-15db98fe-cac9-4228-af94-b7bdc1d7b8aa.png)
![opt_check2_sch](https://user-images.githubusercontent.com/88897605/179356115-f19997e3-01af-4687-b1f3-a0ee10bf8eb9.png)

* Optimizations 2
![opt_check4](https://user-images.githubusercontent.com/88897605/179356114-57990d30-7530-48f1-826d-decea2ea863e.png)
![opt_check4_sch](https://user-images.githubusercontent.com/88897605/179356112-d7d79fe9-a229-4e05-b0d4-76170ff52903.png)

#### Resource sharing optimizations

![resource_sjharing_multi_check](https://user-images.githubusercontent.com/88897605/179356202-201fdbc3-342f-4ebc-9012-d7ac2d1ec47d.png)
![resource_pic](https://user-images.githubusercontent.com/88897605/179356205-e9636fc0-3855-47ec-8b41-16ed6d522b17.png)

* compile_ultra -retime
![resource_opt](https://user-images.githubusercontent.com/88897605/179356226-6ae578b5-5c08-490e-960c-a1c1aa56354e.png)

#### Sequential Optimizations

![dff_const3_pic](https://user-images.githubusercontent.com/88897605/179356378-58f95613-4868-406c-8d1f-339947409e0d.png)

![dff_const3](https://user-images.githubusercontent.com/88897605/179356379-af74c6b3-4df4-4455-b24f-a77ff6e715e8.png)

![dff_const1_pic](https://user-images.githubusercontent.com/88897605/179356380-ac71be8a-b685-4c4f-9a09-ba2106fe498f.png)

![dff_const1](https://user-images.githubusercontent.com/88897605/179356381-deb9e060-9c12-4b2a-b345-000b1d8c931c.png)

##### Boundary Optimizations

* check_boundary_without_buffer
![check_boundary_without_buffer](https://user-images.githubusercontent.com/88897605/179356276-1e2428d8-e95c-4056-bcb9-568954d7c8a2.png)

* check_boundary_with_iso_buffer
![check_boundary_with_iso_buffer](https://user-images.githubusercontent.com/88897605/179356278-2d3a0376-cff8-4183-9eaa-d3d2c3e0ed0b.png)

#### Isolating Path

![iso1](https://user-images.githubusercontent.com/88897605/179356442-10f2a227-3f8b-4ee9-895b-42973a73943f.png)
![iso2](https://user-images.githubusercontent.com/88897605/179356438-93601e6e-8504-4c49-b966-6b1604b0f621.png)

* Isolating Path with Buffer
![iso_buffer](https://user-images.githubusercontent.com/88897605/179356467-08d1a558-7a73-4633-852b-a495c9282a33.png)

* GTK Wave
![GTK_wave](https://user-images.githubusercontent.com/88897605/179356476-16d5640b-9c8e-4f2f-8e5e-8f074687c7c1.png)

#### Multicycle path
![set multipath_check](https://user-images.githubusercontent.com/88897605/179356516-1503812a-ac59-4148-9924-9ba91eb98704.png)


## Report Timing

* report_timing_min
![report_timing_min](https://user-images.githubusercontent.com/88897605/179356547-add5b8f5-065c-4b37-bbf8-683a579b86e0.png)

* report_timing_max
![report_timing_max](https://user-images.githubusercontent.com/88897605/179356550-c08cd092-d2e3-43c8-89a6-23ec49efc85f.png)

#### Check_timing, Check_design, Set_max_capacitance

* Check_timing
![check_timing](https://user-images.githubusercontent.com/88897605/179356620-62e4de30-8cb8-4063-a6a4-598804501b50.png)

* Check_design
![check_design](https://user-images.githubusercontent.com/88897605/179356622-af73f201-c861-4397-a81c-b2f6077e1fef.png)

* Set Max Capcitance
![set_max_cap](https://user-images.githubusercontent.com/88897605/179356618-4bb2f209-eaf2-4a4f-bcac-0c9d76981afc.png)

![read_verilog_en_128](https://user-images.githubusercontent.com/88897605/179356697-561b1f3d-2bc8-4153-aa29-88d22582b3e8.png)

* lab8_modified

![lab8_modified](https://user-images.githubusercontent.com/88897605/179356698-4b337793-666a-475b-9db9-41725c9ea96b.png)

* Enable_128 in Design Vision

![en_128](https://user-images.githubusercontent.com/88897605/179356700-7f614e9a-50dc-476d-8195-238fe9160f1e.png)

* Schematic View
![en_128_sch](https://user-images.githubusercontent.com/88897605/179356699-2c2de05c-8782-4790-88f8-303954c96cdd.png)


# Contributor
Aakash.K</br>
Contact:iaakashkrish@gmail.com</br>

Kunal Ghosh, Co-founder, VSD Corp. Pvt. Ltd. - kunalpghosh@gmail.com

# Acknowledgments
Kunal Ghosh, Co-founder, VSD Corp. Pvt. Ltd. - kunalpghosh@gmail.com


